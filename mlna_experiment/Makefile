# ========================================
# Configuration des logs
# ========================================
LOG_DIR := logs
# 2 pour notre framework et 3 pour la recherche alÃ©atoire
STEP := 2
TIMESTAMP := $(shell date '+%Y%m%d_%H%M%S')
USERNAME := $(shell whoami)

# CrÃ©ation du rÃ©pertoire de logs
$(shell mkdir -p $(LOG_DIR))

# ========================================
# DATASETS AVEC LOGGING
# ========================================

# run our framework on adult
mlna_on_adu:
	@echo "ğŸš€ DÃ©marrage du framework sur Adult - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/Adult_$(TIMESTAMP).log" && \
	echo "ğŸ“ Log disponible dans: $$LOG_FILE" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT du traitement Adult"; \
		echo "ğŸ‘¤ Utilisateur: $(USERNAME)"; \
		echo "ğŸ“ RÃ©pertoire: $$(pwd)"; \
		echo ""; \
		 chmod +x launch.sh &&  ./launch.sh Adult $(STEP); \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN du traitement Adult"; \
	} > "$$LOG_FILE" 2>&1 && \
	echo "âœ… Adult terminÃ© - Log: $$LOG_FILE"

# stop our framework on Adult
stop-mlna_on_adu:
	@echo "ğŸ›‘ ArrÃªt du framework sur Adult - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/Adult_stop_$(TIMESTAMP).log" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT arrÃªt Adult"; \
		 chmod +x kill_screens.sh &&  ./kill_screens.sh Adult && rm -rf /Users/djiemboutienctheuvictornico/.screen/*; \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN arrÃªt Adult"; \
	} > "$$LOG_FILE" 2>&1

# run our framework on BankMarketing
mlna_on_ban:
	@echo "ğŸš€ DÃ©marrage du framework sur BankMarketing - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/BankMarketing_$(TIMESTAMP).log" && \
	echo "ğŸ“ Log disponible dans: $$LOG_FILE" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT du traitement BankMarketing"; \
		echo "ğŸ‘¤ Utilisateur: $(USERNAME)"; \
		echo "ğŸ“ RÃ©pertoire: $$(pwd)"; \
		echo ""; \
		 chmod +x launch.sh &&  ./launch.sh BankMarketing $(STEP); \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN du traitement BankMarketing"; \
	} > "$$LOG_FILE" 2>&1 && \
	echo "âœ… BankMarketing terminÃ© - Log: $$LOG_FILE"

# stop our framework on BankMarketing
stop-mlna_on_ban:
	@echo "ğŸ›‘ ArrÃªt du framework sur BankMarketing"
	@LOG_FILE="$(LOG_DIR)/BankMarketing_stop_$(TIMESTAMP).log" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT arrÃªt BankMarketing"; \
		 chmod +x kill_screens.sh &&  ./kill_screens.sh BankMarketing && rm -rf /Users/djiemboutienctheuvictornico/.screen/*; \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN arrÃªt BankMarketing"; \
	} > "$$LOG_FILE" 2>&1

# run our framework on CarEvaluation
mlna_on_car:
	@echo "ğŸš€ DÃ©marrage du framework sur CarEvaluation - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/CarEvaluation_$(TIMESTAMP).log" && \
	echo "ğŸ“ Log disponible dans: $$LOG_FILE" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT du traitement CarEvaluation"; \
		echo "ğŸ‘¤ Utilisateur: $(USERNAME)"; \
		echo "ğŸ“ RÃ©pertoire: $$(pwd)"; \
		echo ""; \
		 chmod +x launch.sh &&  ./launch.sh CarEvaluation $(STEP); \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN du traitement CarEvaluation"; \
	} > "$$LOG_FILE" 2>&1 && \
	echo "âœ… CarEvaluation terminÃ© - Log: $$LOG_FILE"

# stop our framework on CarEvaluation
stop-mlna_on_car:
	@echo "ğŸ›‘ ArrÃªt du framework sur CarEvaluation"
	@LOG_FILE="$(LOG_DIR)/CarEvaluation_stop_$(TIMESTAMP).log" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT arrÃªt CarEvaluation"; \
		 chmod +x kill_screens.sh &&  ./kill_screens.sh CarEvaluation && rm -rf /Users/djiemboutienctheuvictornico/.screen/*; \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN arrÃªt CarEvaluation"; \
	} > "$$LOG_FILE" 2>&1

# run our framework on CreditRiskDataset
mlna_on_crd:
	@echo "ğŸš€ DÃ©marrage du framework sur CreditRiskDataset - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/CreditRiskDataset_$(TIMESTAMP).log" && \
	echo "ğŸ“ Log disponible dans: $$LOG_FILE" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT du traitement CreditRiskDataset"; \
		echo "ğŸ‘¤ Utilisateur: $(USERNAME)"; \
		echo "ğŸ“ RÃ©pertoire: $$(pwd)"; \
		echo ""; \
		 chmod +x launch.sh &&  ./launch.sh CreditRiskDataset $(STEP); \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN du traitement CreditRiskDataset"; \
	} > "$$LOG_FILE" 2>&1 && \
	echo "âœ… CreditRiskDataset terminÃ© - Log: $$LOG_FILE"

# stop our framework on CreditRiskDataset
stop-mlna_on_crd:
	@echo "ğŸ›‘ ArrÃªt du framework sur CreditRiskDataset"
	@LOG_FILE="$(LOG_DIR)/CreditRiskDataset_stop_$(TIMESTAMP).log" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT arrÃªt CreditRiskDataset"; \
		 chmod +x kill_screens.sh &&  ./kill_screens.sh CreditRiskDataset && rm -rf /Users/djiemboutienctheuvictornico/.screen/*; \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN arrÃªt CreditRiskDataset"; \
	} > "$$LOG_FILE" 2>&1

# run our framework on Diabetes
mlna_on_dia:
	@echo "ğŸš€ DÃ©marrage du framework sur Diabetes - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/Diabetes_$(TIMESTAMP).log" && \
	echo "ğŸ“ Log disponible dans: $$LOG_FILE" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT du traitement Diabetes"; \
		echo "ğŸ‘¤ Utilisateur: $(USERNAME)"; \
		echo "ğŸ“ RÃ©pertoire: $$(pwd)"; \
		echo ""; \
		 chmod +x launch.sh &&  ./launch.sh Diabetes $(STEP); \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN du traitement Diabetes"; \
	} > "$$LOG_FILE" 2>&1 && \
	echo "âœ… Diabetes terminÃ© - Log: $$LOG_FILE"

# stop our framework on Diabetes
stop-mlna_on_dia:
	@echo "ğŸ›‘ ArrÃªt du framework sur Diabetes"
	@LOG_FILE="$(LOG_DIR)/Diabetes_stop_$(TIMESTAMP).log" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT arrÃªt Diabetes"; \
		 chmod +x kill_screens.sh &&  ./kill_screens.sh Diabetes && rm -rf /Users/djiemboutienctheuvictornico/.screen/*; \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN arrÃªt Diabetes"; \
	} > "$$LOG_FILE" 2>&1

# run our framework on GermanCredit
mlna_on_ger:
	@echo "ğŸš€ DÃ©marrage du framework sur GermanCredit - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/GermanCredit_$(TIMESTAMP).log" && \
	echo "ğŸ“ Log disponible dans: $$LOG_FILE" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT du traitement GermanCredit"; \
		echo "ğŸ‘¤ Utilisateur: $(USERNAME)"; \
		echo "ğŸ“ RÃ©pertoire: $$(pwd)"; \
		echo ""; \
		 chmod +x launch.sh &&  ./launch.sh GermanCredit $(STEP); \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN du traitement GermanCredit"; \
	} > "$$LOG_FILE" 2>&1 && \
	echo "âœ… GermanCredit terminÃ© - Log: $$LOG_FILE"

# stop our framework on GermanCredit
stop-mlna_on_ger:
	@echo "ğŸ›‘ ArrÃªt du framework sur GermanCredit"
	@LOG_FILE="$(LOG_DIR)/GermanCredit_stop_$(TIMESTAMP).log" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT arrÃªt GermanCredit"; \
		 chmod +x kill_screens.sh &&  ./kill_screens.sh GermanCredit && rm -rf /Users/djiemboutienctheuvictornico/.screen/*; \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN arrÃªt GermanCredit"; \
	} > "$$LOG_FILE" 2>&1

# run our framework on LoanDataforDummyBank
mlna_on_ld4:
	@echo "ğŸš€ DÃ©marrage du framework sur LoanDataforDummyBank - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/LoanDataforDummyBank_$(TIMESTAMP).log" && \
	echo "ğŸ“ Log disponible dans: $$LOG_FILE" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT du traitement LoanDataforDummyBank"; \
		echo "ğŸ‘¤ Utilisateur: $(USERNAME)"; \
		echo "ğŸ“ RÃ©pertoire: $$(pwd)"; \
		echo ""; \
		 chmod +x launch.sh &&  ./launch.sh LoanDataforDummyBank $(STEP); \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN du traitement LoanDataforDummyBank"; \
	} > "$$LOG_FILE" 2>&1 && \
	echo "âœ… LoanDataforDummyBank terminÃ© - Log: $$LOG_FILE"

# stop our framework on LoanDataforDummyBank
stop-mlna_on_ld4:
	@echo "ğŸ›‘ ArrÃªt du framework sur LoanDataforDummyBank"
	@LOG_FILE="$(LOG_DIR)/LoanDataforDummyBank_stop_$(TIMESTAMP).log" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT arrÃªt LoanDataforDummyBank"; \
		 chmod +x kill_screens.sh &&  ./kill_screens.sh LoanDataforDummyBank && rm -rf /Users/djiemboutienctheuvictornico/.screen/*; \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN arrÃªt LoanDataforDummyBank"; \
	} > "$$LOG_FILE" 2>&1

# run our framework on LoanDefaultDataset
mlna_on_ldd:
	@echo "ğŸš€ DÃ©marrage du framework sur LoanDefaultDataset - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/LoanDefaultDataset_$(TIMESTAMP).log" && \
	echo "ğŸ“ Log disponible dans: $$LOG_FILE" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT du traitement LoanDefaultDataset"; \
		echo "ğŸ‘¤ Utilisateur: $(USERNAME)"; \
		echo "ğŸ“ RÃ©pertoire: $$(pwd)"; \
		echo ""; \
		 chmod +x launch.sh &&  ./launch.sh LoanDefaultDataset $(STEP); \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN du traitement LoanDefaultDataset"; \
	} > "$$LOG_FILE" 2>&1 && \
	echo "âœ… LoanDefaultDataset terminÃ© - Log: $$LOG_FILE"

# stop our framework on LoanDefaultDataset
stop-mlna_on_ldd:
	@echo "ğŸ›‘ ArrÃªt du framework sur LoanDefaultDataset"
	@LOG_FILE="$(LOG_DIR)/LoanDefaultDataset_stop_$(TIMESTAMP).log" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT arrÃªt LoanDefaultDataset"; \
		 chmod +x kill_screens.sh &&  ./kill_screens.sh LoanDefaultDataset && rm -rf /Users/djiemboutienctheuvictornico/.screen/*; \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN arrÃªt LoanDefaultDataset"; \
	} > "$$LOG_FILE" 2>&1

# run our framework on Mushroom
mlna_on_mus:
	@echo "ğŸš€ DÃ©marrage du framework sur Mushroom - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/Mushroom_$(TIMESTAMP).log" && \
	echo "ğŸ“ Log disponible dans: $$LOG_FILE" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT du traitement Mushroom"; \
		echo "ğŸ‘¤ Utilisateur: $(USERNAME)"; \
		echo "ğŸ“ RÃ©pertoire: $$(pwd)"; \
		echo ""; \
		 chmod +x launch.sh &&  ./launch.sh Mushroom $(STEP); \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN du traitement Mushroom"; \
	} > "$$LOG_FILE" 2>&1 && \
	echo "âœ… Mushroom terminÃ© - Log: $$LOG_FILE"

# stop our framework on Mushroom
stop-mlna_on_mus:
	@echo "ğŸ›‘ ArrÃªt du framework sur Mushroom"
	@LOG_FILE="$(LOG_DIR)/Mushroom_stop_$(TIMESTAMP).log" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT arrÃªt Mushroom"; \
		 chmod +x kill_screens.sh &&  ./kill_screens.sh Mushroom && rm -rf /Users/djiemboutienctheuvictornico/.screen/*; \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN arrÃªt Mushroom"; \
	} > "$$LOG_FILE" 2>&1

# run our framework on Nursery
mlna_on_nur:
	@echo "ğŸš€ DÃ©marrage du framework sur Nursery - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/Nursery_$(TIMESTAMP).log" && \
	echo "ğŸ“ Log disponible dans: $$LOG_FILE" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT du traitement Nursery"; \
		echo "ğŸ‘¤ Utilisateur: $(USERNAME)"; \
		echo "ğŸ“ RÃ©pertoire: $$(pwd)"; \
		echo ""; \
		 chmod +x launch.sh &&  ./launch.sh Nursery $(STEP); \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN du traitement Nursery"; \
	} > "$$LOG_FILE" 2>&1 && \
	echo "âœ… Nursery terminÃ© - Log: $$LOG_FILE"

# stop our framework on Nursery
stop-mlna_on_nur:
	@echo "ğŸ›‘ ArrÃªt du framework sur Nursery"
	@LOG_FILE="$(LOG_DIR)/Nursery_stop_$(TIMESTAMP).log" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT arrÃªt Nursery"; \
		 chmod +x kill_screens.sh &&  ./kill_screens.sh Nursery && rm -rf /Users/djiemboutienctheuvictornico/.screen/*; \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN arrÃªt Nursery"; \
	} > "$$LOG_FILE" 2>&1

# run our framework on StudentPerformance
mlna_on_stu:
	@echo "ğŸš€ DÃ©marrage du framework sur StudentPerformance - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/StudentPerformance_$(TIMESTAMP).log" && \
	echo "ğŸ“ Log disponible dans: $$LOG_FILE" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT du traitement StudentPerformance"; \
		echo "ğŸ‘¤ Utilisateur: $(USERNAME)"; \
		echo "ğŸ“ RÃ©pertoire: $$(pwd)"; \
		echo ""; \
		 chmod +x launch.sh &&  ./launch.sh StudentPerformance $(STEP); \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN du traitement StudentPerformance"; \
	} > "$$LOG_FILE" 2>&1 && \
	echo "âœ… StudentPerformance terminÃ© - Log: $$LOG_FILE"

# stop our framework on StudentPerformance
stop-mlna_on_stu:
	@echo "ğŸ›‘ ArrÃªt du framework sur StudentPerformance"
	@LOG_FILE="$(LOG_DIR)/StudentPerformance_stop_$(TIMESTAMP).log" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT arrÃªt StudentPerformance"; \
		 chmod +x kill_screens.sh &&  ./kill_screens.sh StudentPerformance && rm -rf /Users/djiemboutienctheuvictornico/.screen/*; \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN arrÃªt StudentPerformance"; \
	} > "$$LOG_FILE" 2>&1

# ========================================
# COMMANDES PARALLÃˆLES AVEC LOGGING GLOBAL
# ========================================

# run parallel execution by default
# nice -n 10, permet de dire au systÃ¨me que nos execution ne sont pas prioritaires.
run-all:
	@echo "ğŸš€ DÃ©marrage de toutes les exÃ©cutions en parallÃ¨le - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/run-all_$(TIMESTAMP).log" && \
	echo "ğŸ“ Log global disponible dans: $$LOG_FILE" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT exÃ©cution parallÃ¨le de tous les datasets"; \
		echo "ğŸ‘¤ Utilisateur: $(USERNAME)"; \
		echo "ğŸ“ RÃ©pertoire: $$(pwd)"; \
		echo "ğŸ“Š Datasets: Adult, BankMarketing, CarEvaluation, CreditRiskDataset, Diabetes, GermanCredit, LoanDataforDummyBank, LoanDefaultDataset, Mushroom, Nursery, StudentPerformance"; \
		echo ""; \
		nice -n 10 $(MAKE) -j 1 mlna_on_crd mlna_on_car mlna_on_nur mlna_on_adu mlna_on_dia mlna_on_ld4 mlna_on_ban mlna_on_ger mlna_on_stu mlna_on_mus mlna_on_ldd; \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN exÃ©cution parallÃ¨le"; \
	} > "$$LOG_FILE" 2>&1 && \
	echo "ğŸ‰ Toutes les exÃ©cutions terminÃ©es - Log global: $$LOG_FILE"

stop-all:
	@echo "ğŸ›‘ ArrÃªt de toutes les exÃ©cutions - $(shell date '+%Y-%m-%d %H:%M:%S')"
	@LOG_FILE="$(LOG_DIR)/stop-all_$(TIMESTAMP).log" && \
	echo "ğŸ“ Log d'arrÃªt disponible dans: $$LOG_FILE" && \
	{ \
		echo "ğŸ”¹ [$(shell date '+%Y-%m-%d %H:%M:%S')] DÃ‰BUT arrÃªt de tous les processus"; \
		echo "ğŸ‘¤ Utilisateur: $(USERNAME)"; \
		echo ""; \
		$(MAKE) -j 1 stop-mlna_on_crd stop-mlna_on_car stop-mlna_on_nur stop-mlna_on_adu stop-mlna_on_dia stop-mlna_on_ld4 stop-mlna_on_ban stop-mlna_on_ger stop-mlna_on_stu stop-mlna_on_mus stop-mlna_on_ldd; \
		echo "âœ… [$(shell date '+%Y-%m-%d %H:%M:%S')] FIN arrÃªt de tous les processus"; \
	} > "$$LOG_FILE" 2>&1 && \
	echo "ğŸ‰ Tous les processus arrÃªtÃ©s - Log: $$LOG_FILE"

# ========================================
# UTILITAIRES DE GESTION DES LOGS
# ========================================

# Voir les logs rÃ©cents
show-logs:
	@echo "ğŸ“‹ Logs disponibles dans $(LOG_DIR):"
	@ls -lart $(LOG_DIR)/ | tail -10

# Nettoyer les anciens logs (plus de 7 jours)
clean-old-logs:
	@echo "ğŸ§¹ Nettoyage des logs anciens (>7 jours)..."
	@find $(LOG_DIR) -name "*.log" -mtime +7 -delete
	@echo "âœ… Nettoyage terminÃ©"

# Voir le log le plus rÃ©cent
tail-latest:
	@echo "ğŸ‘€ Suivi du log le plus rÃ©cent:"
	@tail -f $$(ls -t $(LOG_DIR)/*.log | head -1)

# RÃ©sumÃ© des exÃ©cutions du jour
daily-summary:
	@echo "ğŸ“Š RÃ©sumÃ© des exÃ©cutions du jour ($(shell date '+%Y%m%d')):"
	@find $(LOG_DIR) -name "*$(shell date '+%Y%m%d')*.log" -exec basename {} \; | sort

# Aide
help:
	@echo "ğŸ”§ Commandes disponibles:"
	@echo "  ExÃ©cution individuelle: mlna_on_<dataset>"
	@echo "  ArrÃªt individuel: stop-mlna_on_<dataset>"
	@echo "  ExÃ©cution parallÃ¨le: run-all"
	@echo "  ArrÃªt global: stop-all"
	@echo ""
	@echo "ğŸ“ Gestion des logs:"
	@echo "  show-logs: Afficher les logs rÃ©cents"
	@echo "  tail-latest: Suivre le log le plus rÃ©cent"
	@echo "  clean-old-logs: Nettoyer les logs anciens"
	@echo "  daily-summary: RÃ©sumÃ© du jour"
	@echo ""
	@echo "ğŸ“ Les logs sont sauvegardÃ©s dans: $(LOG_DIR)/"

.PHONY: mlna_on_adu stop-mlna_on_adu mlna_on_ban stop-mlna_on_ban mlna_on_car stop-mlna_on_car mlna_on_crd stop-mlna_on_crd mlna_on_dia stop-mlna_on_dia mlna_on_ger stop-mlna_on_ger mlna_on_ld4 stop-mlna_on_ld4 mlna_on_ldd stop-mlna_on_ldd mlna_on_mus stop-mlna_on_mus mlna_on_nur stop-mlna_on_nur mlna_on_stu stop-mlna_on_stu run-all stop-all show-logs clean-old-logs tail-latest daily-summary help